<!-- build time:Mon May 09 2022 00:52:52 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="余弦の博客" href="https://ysx.cosine.ren/rss.xml"><link rel="alternate" type="application/atom+xml" title="余弦の博客" href="https://ysx.cosine.ren/atom.xml"><link rel="alternate" type="application/json" title="余弦の博客" href="https://ysx.cosine.ren/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="前端,响应式,React,Hook"><link rel="canonical" href="https://ysx.cosine.ren/note/front-end/bytedance-note/responsive-system-and-react/"><title>青训营 |「响应式系统与 React」 - 青训营笔记 - 笔记 | cosine = 余弦の博客 = WA 的一声就哭了</title><meta name="generator" content="Hexo 6.1.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline"><a href="/note/front-end/bytedance-note/responsive-system-and-react" class="link external" itemprop="url">青训营 |「响应式系统与 React」<i class="ic i-link-alt"></i></a></h1><div class="meta"><span class="item" title="创建时间：2022-01-21 14:30:17"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-01-21T14:30:17+08:00">2022-01-21</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>4.6k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">cosine</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/img/header_img/lml_bg.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/note/" itemprop="item" rel="index" title="分类于 笔记"><span itemprop="name">笔记</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/note/bytedance-note/" itemprop="item" rel="index" title="分类于 青训营笔记"><span itemprop="name">青训营笔记</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="cn"><link itemprop="mainEntityOfPage" href="https://ysx.cosine.ren/note/front-end/bytedance-note/responsive-system-and-react/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/avatar.jpg"><meta itemprop="name" content="cos"><meta itemprop="description" content="WA 的一声就哭了, 愿岁并谢，与友长兮"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="余弦の博客"></span><div class="body md" itemprop="articleBody"><h2 id="react的历史与应用"><a class="anchor" href="#react的历史与应用">#</a> React 的历史与应用</h2><p><strong>应用</strong></p><ul><li>前端应用开发，如 Facebook，Instagram，Netflix 网页版。</li><li>移动原生应用开发，如 Instagram，Discord，Oculus。</li><li>结合 Electron，进行桌面应用开发。</li></ul><p><strong>历史</strong></p><ul><li>2010 年 Facebook 在其 php 生态中，引入了 xhp 框架，首次引入了组合式组件的思想，启发了后来的 React 的设计。</li><li>2011 年 Jordan Walke 创造了 FaxJS，也就是后来的 React 原型:<ul><li>既可以在客户端渲染也可以在服务端渲染</li><li>响应式，当状态变更时，UI 会自动更新。</li><li>性能好，快速渲染</li><li>高度封装组件，函数式声明，</li></ul></li><li>2013 年 React 正式开源，在 2013 JSConf 上 Jordan Walke 介绍了这款全新的框架：React</li><li>2014 年 - 今天 生态大爆发，各种围绕 React 的新工具 / 新框架开始涌现</li></ul><h2 id="react设计思路"><a class="anchor" href="#react设计思路">#</a> React 设计思路</h2><h3 id="ui编程痛点"><a class="anchor" href="#ui编程痛点">#</a> UI 编程痛点</h3><ol><li>当状态更新时，UI 不会自动更新，需要<strong>手动地调用 DOM</strong> 进行更新。</li><li>欠缺基本的代码层面的<strong>封装</strong>和<strong>隔离</strong>，代码层面没有<strong>组件化</strong>。</li><li>UI 之间的数据依赖关系，需要手动维护，如果依赖链路长．则会遇到 “Callback Hell”（回调地狱）。</li></ol><h3 id="响应式与转换式"><a class="anchor" href="#响应式与转换式">#</a> 响应式与转换式</h3><p>转换式系统：给定<strong>输入</strong>求解<strong>输出</strong>，如编译器、数值计算</p><p>响应式系统：监听事件，消息驱动，如监控系统、UI 界面</p><p>事件 -&gt; 执行既定的回调 -&gt; 状态变更 -&gt; UI 更新</p><h3 id="响应式编程和组件化"><a class="anchor" href="#响应式编程和组件化">#</a> 响应式编程和组件化</h3><p>那么我们就希望解决以上痛点：</p><ul><li>状态更新，UI 自动更新。</li><li>前端代码组件化，可复用，可封装。</li><li>状态之间的互相依赖关系，只需声明即可。</li></ul><p><img data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0fb3eaa27394eb4a07ec92c11e62d3b~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p><strong>组件化</strong></p><ol><li>组件一个是 原子组件 / 或组件的组合</li><li>组件内部拥有状态，外部不可见</li><li>父组件可将状态传入组件内部，来控制子组件的运转。</li></ol><h3 id="状态归属问题"><a class="anchor" href="#状态归属问题">#</a> 状态归属问题</h3><p><strong>当前价格</strong> 属于 Root 结点！因为要向下传递，这其实不合理，在下面的状态管理库里会讲到这个的解决方法。</p><p>状态应该归属于两个节点（或多个）向上寻找到的<strong>最近共同祖先</strong>。</p><p>思考：</p><ol><li>React 是单向数据流，还是双向数据流？</li></ol><p>答：单向的，永远是只有父组件给子组件传东西，但这并不代表子组件不能改变父组件的状态。</p><ol start="2"><li>如何解决状态不合理上升的问题？</li></ol><p>答：通过状态管理库，接下来也会讲到。</p><ol start="3"><li>组件的状态改变后，如何更新 DOM?</li></ol><p>答：讲解 React 实现中会提到。</p><p>组件设计：</p><ul><li>组件声明了状态和 UI 的映射</li><li>组件有 Props（外部）/State（内部）两种属性<ul><li>Props 接受父组件传入的状态</li><li>State 是内部的属性。</li></ul></li><li>可被其他组件组成</li></ul><blockquote><p>ps：学过小程序的同学应该知道，小程序中的属性的双向绑定实际上应该也有用到了这个思想。</p></blockquote><h3 id="生命周期"><a class="anchor" href="#生命周期">#</a> 生命周期</h3><p>挂载 -&gt; 状态更新 -&gt; 卸载</p><h2 id="reacthooks的写法"><a class="anchor" href="#reacthooks的写法">#</a> React（hooks）的写法</h2><p>关于 React Hook 可以参看官方文档，以下内容大部分摘自：<span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaG9va3MtaW50cm8uaHRtbA==">Hook 简介 – React (reactjs.org)</span></p><blockquote><p><em>Hook</em> 是 React 16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性。</p></blockquote><h3 id="state-hook"><a class="anchor" href="#state-hook">#</a> State Hook</h3><pre><code class="language-react">import React, &#123;useState&#125; from 'react';
function Example() &#123;
	// 声明一个叫 “count” 的 state 变量。
	const [count, setCount] = useState(0);
    return (
        &lt;div&gt;
       		&lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;
			&lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;
        		Click me
            &lt;/button&gt;
        &lt;/div&gt;
    );
&#125;
</code></pre><p>上面这段函数用来显示一个计数器，当点击按钮时，计数器的值就会自动增加</p><blockquote><p>在这里， <code>useState</code> 就是一个 <em>Hook</em> 。通过在函数组件里调用它来给组件添加一些内部 state。React 会在重复渲染时保留这个 state。 <code>useState</code> 会返回一对值：<strong>当前状态</strong>和<strong>其更新函数</strong>，你可以在事件处理函数中或其他一些地方调用这个函数。</p></blockquote><blockquote><p><code>useState</code> 唯一的参数就是初始 state。在上面的例子中，我们的计数器是从零开始的，所以初始 state 就是 <code>0</code> 。值得注意的是，不同于 <code>this.state</code> ，这里的 state 不一定要是一个对象 —— 如果你有需要，它也可以是。这个初始 state 参数只有在第一次渲染时会被用到。</p></blockquote><blockquote><p>Hook 是一些可以让你在函数组件里 <strong>“钩入”</strong> React state 及生命周期等特性的函数。</p></blockquote><p>可以在一个组件中多次使用 State Hook:</p><pre><code class="language-react">function ExampleWithManyStates() &#123;
  // 声明多个 state 变量！
  const [age, setAge] = useState(42);
  const [fruit, setFruit] = useState('banana');
  const [todos, setTodos] = useState([&#123; text: 'Learn Hooks' &#125;]);
  // ...
&#125;
</code></pre><h3 id="effect-hook"><a class="anchor" href="#effect-hook">#</a> Effect Hook</h3><p><strong>函数副作用</strong>是指当调用函数时，除了<strong>返回值</strong>之外，还会<strong>对主调用函数产生其他附加的影响</strong>。例如修改全局变量（函数外的变量）或修改参数。纯函数就是指没有函数副作用的函数，这在 js 那一节里都有讲过。</p><blockquote><p>例如，下面这个组件在 React 更新 DOM 后会设置一个页面标题：</p></blockquote><pre><code class="language-react">import React, &#123; useState, useEffect &#125; from 'react';

function Example() &#123;
  const [count, setCount] = useState(0);

  // 相当于 componentDidMount 和 componentDidUpdate:
  useEffect(() =&gt; &#123;
    // 使用浏览器的 API 更新页面标题
    document.title = `You clicked $&#123;count&#125; times`;
  &#125;);

  return (
    &lt;div&gt;
      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;
      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;
        Click me
      &lt;/button&gt;
    &lt;/div&gt;
  );
&#125;
</code></pre><blockquote><p>当你调用 <code>useEffect</code> 时，就是在告诉 React 在 <strong>完成对 DOM 的更改后运行你的 “副作用” 函数</strong> 。由于副作用函数是在组件内声明的，所以它们可以访问到组件的 props 和 state。</p></blockquote><h3 id="hook的使用法则"><a class="anchor" href="#hook的使用法则">#</a> Hook 的使用法则</h3><p>Hook 就是 JavaScript 函数，但是使用它们会有两个额外的规则：</p><ul><li>只能在<strong>函数最外层</strong>调用 Hook。<strong>不要</strong>在<strong>循环、条件判断或者子函数</strong>中调用。</li><li>只能在 <strong>React 的函数组件</strong>中调用 Hook。<strong>不要</strong>在<strong>其他 JavaScript 函数</strong>中调用。（还有一个地方可以调用 Hook —— 就是自定义的 Hook 中）</li></ul><blockquote><p>同时，我们提供了 <span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNsaW50LXBsdWdpbi1yZWFjdC1ob29rcw==">linter 插件</span>来自动执行这些规则。这些规则乍看起来会有一些限制和令人困惑，但是要让 Hook 正常工作，它们至关重要。</p></blockquote><p>以上是 React 官方文档的说法</p><h2 id="react的实现"><a class="anchor" href="#react的实现">#</a> React 的实现</h2><p>三个问题：</p><ol><li><span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvaW50cm9kdWNpbmctanN4Lmh0bWwjZ2F0c2J5LWZvY3VzLXdyYXBwZXI=">JSX</span> 是不符合 JS 标准的语法</li><li>返回的 JSX 改变时，如何更新 DOM?</li><li>State/Props 更新时， 要重新触发 render 函数</li></ol><h3 id="problem1"><a class="anchor" href="#problem1">#</a> Problem1</h3><p>解决办法也很简单，就是将 JSX 转换为符合 JS 语法的</p><pre><code class="language-react">const element = (
  &lt;h1 className=&quot;greeting&quot;&gt;
    Hello, world!
  &lt;/h1&gt;
);
// 等价于 
const element = React.createElement(
  'h1',
  &#123;className: 'greeting'&#125;,
  'Hello, world!'
);
</code></pre><h3 id="problem2"><a class="anchor" href="#problem2">#</a> Problem2</h3><p>返回的 JSX 本身是类似 DOM 的一种东西，但不是 DOM，DOM 操作本身是十分耗费性能的。所以需要将返回的 JSX 与原来的 DOM 结构计算一个 diff（差别）？但是这个 diff 算法本身不能太耗时，尽可能小，尽可能短。</p><h4 id="virtual-dom-虚拟dom"><a class="anchor" href="#virtual-dom-虚拟dom">#</a> Virtual DOM （虚拟 DOM）</h4><p><span class="exturl" data-url="aHR0cHM6Ly96aC1oYW5zLnJlYWN0anMub3JnL2RvY3MvZmFxLWludGVybmFscy5odG1sI2dhdHNieS1mb2N1cy13cmFwcGVy">Virtual DOM</span> 是一种用于与真实 DOM 同步，而在 JS 内存中维护的一个<strong>对象</strong>，它具有和 DOM 类似的树状结构并可以和 DOM 建立一一对应的关系。</p><blockquote><p>这种方式赋予了 React 声明式的 API：您告诉 React 希望让 UI 是什么状态，React 就确保 DOM 匹配该状态。这使您可以从属性操作、事件处理和手动 DOM 更新这些在构建应用程序时必要的操作中解放出来。</p></blockquote><p>状态更新 -&gt; diff 比对 Virtual DOM 和真实 DOM - &gt; Re-render Virtual DOM 改变我们的真实 DOM</p><h4 id="how-to-diff"><a class="anchor" href="#how-to-diff">#</a> How to Diff??</h4><p>更新次数少 &lt;- 权衡 -&gt; 计算速度快</p><p>完美的最小 Diff 算法，需要 O (n^3) 的复杂度</p><p>而牺牲理论最小 Diff，换取时间，得到了 O (n) 复杂度的算法，他是局部最优的。Heuristic O (n) Algorithm （启发式算法）</p><ul><li><p>不同类型的元素 -&gt; 替换</p></li><li><p>同类型的 DOM 元素 -&gt; 更新</p></li><li><p>同类型的组件元素 -&gt; 递归</p></li></ul><p>这个算法只遍历了一遍，就可以算出 diff。</p><p>而这也是 React 一个弊病，一个组件发生改变时，其子组件全部会重新渲染。要解决这个问题，就要看接下来的 React 的状态管理库。</p><h2 id="react的状态管理库"><a class="anchor" href="#react的状态管理库">#</a> React 的状态管理库</h2><h3 id="核心思想"><a class="anchor" href="#核心思想">#</a> 核心思想</h3><p><strong>将状态抽离到 UI 外部进行统一管理</strong>，但是这是会降低组件的复用性，所以这一般出现在业务代码中。以下几种框架，用哪个都行</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucmVkdXgub3JnLmNuLw==">Redux 中文文档</span></li><li><span class="exturl" data-url="aHR0cHM6Ly94c3RhdGUuanMub3JnLw==">XState - JavaScript State Machines and Statecharts</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9jbi5tb2J4LmpzLm9yZy8=">MobX 介绍・MobX 中文文档</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucmVjb2lsanMuY24v">Recoil 中文文档 | Recoil 中文网 (recoiljs.cn)</span></li></ul><h3 id="状态机"><a class="anchor" href="#状态机">#</a> 状态机</h3><p>收到外部事件后根据当前状态，迁移到下一个状态。</p><p>哪些状态适合放到状态管理库？</p><ul><li>可能会被很多层级的组件用到的状态</li></ul><h2 id="应用级框架科普"><a class="anchor" href="#应用级框架科普">#</a> 应用级框架科普</h2><p>React 本身是没有提供足够多的工程能力，如路由、页面配置等等。</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cubmV4dGpzLmNuLw==">Next.js - React 应用开发框架</span> 硅谷明星创业公司 Vercel 的 React 开发框架，稳定，开发体验好，支持 Unbundled Dev,sWC 等，其同样有 Serverless 一键部署平台帮助开发者快速完成部署。口号是 &quot;Let's Make Web Faster&quot;</li><li><span class="exturl" data-url="aHR0cHM6Ly9tb2Rlcm5qcy5kZXYv">Modern.js - 现代 Web 工程体系 (modernjs.dev)</span> 字节跳动 Web Infra 团队研发的全栈开发框架，内瓷了很多开箱即用的能力与最佳实践，可以减少很多调研选择工具的时间。</li><li><span class="exturl" data-url="aHR0cHM6Ly9ibGl0empzLmNvbS9kb2NzL2dldC1zdGFydGVk">Get Started with Blitz (blitzjs.com)</span> 无 API 思想的全栈开发框架，开发过程中无需写 API 调用与 CRUD 逻辑，适合前后端紧密小团队项目。</li></ul><h2 id="课后作业"><a class="anchor" href="#课后作业">#</a> 课后作业</h2><ol><li>React 组件的 render 函数，在哪些时机下，会被重新执行？</li><li>React 这种函数式编程，和 vue 这种基于模版语法的前端框架，各有什么优点和缺点？</li><li>React 推荐使用组合来进行组件的复用，而不是继承，背后有什么样的考虑？</li></ol><p>个人理解</p><h2 id="总结感想"><a class="anchor" href="#总结感想">#</a> 总结感想</h2><p>本节课大致介绍了 React 及其原理，介绍了组件化、一些应用级框架</p><blockquote><p>本文引用的内容大部分来自牛岱老师的课，以及 React 官方文档</p></blockquote><div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="ic i-tag"></i> 前端</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" rel="tag"><i class="ic i-tag"></i> 响应式</a> <a href="/tags/React/" rel="tag"><i class="ic i-tag"></i> React</a> <a href="/tags/Hook/" rel="tag"><i class="ic i-tag"></i> Hook</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-05-09 00:52:24" itemprop="dateModified" datetime="2022-05-09T00:52:24+08:00">2022-05-09</time> </span><span id="note/front-end/bytedance-note/responsive-system-and-react/" class="item leancloud_visitors" data-flag-title="青训营 |「响应式系统与 React」" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/img/wechatpay.png" alt="cos 微信支付"><p>微信支付</p></div><div><img data-src="/img/alipay.png" alt="cos 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>作者： </strong>cos <i class="ic i-at"><em>@</em></i>余弦の博客</li><li class="link"><strong>本文链接：</strong> <a href="https://ysx.cosine.ren/note/front-end/bytedance-note/responsive-system-and-react/" title="青训营 |「响应式系统与 React」">https://ysx.cosine.ren/note/front-end/bytedance-note/responsive-system-and-react/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/note/front-end/bytedance-note/development-and-debugging/" itemprop="url" rel="prev" data-background-image="&#x2F;img&#x2F;header_img&#x2F;lml_bg.jpg" title="青训营 |「前端必须知道的开发调试知识」"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 学习笔记</span><h3>青训营 |「前端必须知道的开发调试知识」</h3></a></div><div class="item right"><a href="/note/front-end/bytedance-note/animation-implement/" itemprop="url" rel="next" data-background-image="&#x2F;img&#x2F;header_img&#x2F;lml_bg.jpg" title="青训营 |「前端动画实现」"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 青训营笔记</span><h3>青训营 |「前端动画实现」</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#react%E7%9A%84%E5%8E%86%E5%8F%B2%E4%B8%8E%E5%BA%94%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">React 的历史与应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#react%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">2.</span> <span class="toc-text">React 设计思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ui%E7%BC%96%E7%A8%8B%E7%97%9B%E7%82%B9"><span class="toc-number">2.1.</span> <span class="toc-text">UI 编程痛点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E4%B8%8E%E8%BD%AC%E6%8D%A2%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">响应式与转换式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%92%8C%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">2.3.</span> <span class="toc-text">响应式编程和组件化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E5%BD%92%E5%B1%9E%E9%97%AE%E9%A2%98"><span class="toc-number">2.4.</span> <span class="toc-text">状态归属问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.5.</span> <span class="toc-text">生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reacthooks%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">React（hooks）的写法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#state-hook"><span class="toc-number">3.1.</span> <span class="toc-text">State Hook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#effect-hook"><span class="toc-number">3.2.</span> <span class="toc-text">Effect Hook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hook%E7%9A%84%E4%BD%BF%E7%94%A8%E6%B3%95%E5%88%99"><span class="toc-number">3.3.</span> <span class="toc-text">Hook 的使用法则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#react%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.</span> <span class="toc-text">React 的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#problem1"><span class="toc-number">4.1.</span> <span class="toc-text">Problem1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#problem2"><span class="toc-number">4.2.</span> <span class="toc-text">Problem2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#virtual-dom-%E8%99%9A%E6%8B%9Fdom"><span class="toc-number">4.2.1.</span> <span class="toc-text">Virtual DOM （虚拟 DOM）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#how-to-diff"><span class="toc-number">4.2.2.</span> <span class="toc-text">How to Diff??</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#react%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93"><span class="toc-number">5.</span> <span class="toc-text">React 的状态管理库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-number">5.1.</span> <span class="toc-text">核心思想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%9C%BA"><span class="toc-number">5.2.</span> <span class="toc-text">状态机</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%BA%A7%E6%A1%86%E6%9E%B6%E7%A7%91%E6%99%AE"><span class="toc-number">6.</span> <span class="toc-text">应用级框架科普</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A"><span class="toc-number">7.</span> <span class="toc-text">课后作业</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E6%84%9F%E6%83%B3"><span class="toc-number">8.</span> <span class="toc-text">总结感想</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/note/front-end/bytedance-note/css-learning-layout/" rel="bookmark" title="青训营 |「CSS布局」">青训营 |「CSS布局」</a></li><li><a href="/note/front-end/bytedance-note/javascript-learing/" rel="bookmark" title="青训营 |「跟着月影学 JavaScript」笔记">青训营 |「跟着月影学 JavaScript」笔记</a></li><li><a href="/note/front-end/bytedance-note/web-standards-and-front-end-development/" rel="bookmark" title="青训营 |「Web 标准与前端开发」">青训营 |「Web 标准与前端开发」</a></li><li><a href="/note/front-end/bytedance-note/animation-implement/" rel="bookmark" title="青训营 |「前端动画实现」">青训营 |「前端动画实现」</a></li><li class="active"><a href="/note/front-end/bytedance-note/responsive-system-and-react/" rel="bookmark" title="青训营 |「响应式系统与 React」">青训营 |「响应式系统与 React」</a></li><li><a href="/note/front-end/bytedance-note/http-utilization-guide/" rel="bookmark" title="青训营 |「HTTP实用指南」">青训营 |「HTTP实用指南」</a></li><li><a href="/note/front-end/bytedance-note/nodejs-develop/" rel="bookmark" title="青训营 |「Node.js 与前端开发实战」">青训营 |「Node.js 与前端开发实战」</a></li><li><a href="/note/front-end/bytedance-note/web-safe-getting-started/" rel="bookmark" title="青训营 |「Web开发的安全之旅」">青训营 |「Web开发的安全之旅」</a></li><li><a href="/note/front-end/bytedance-note/webgl-basics/" rel="bookmark" title="青训营 |「WebGL基础」">青训营 |「WebGL基础」</a></li><li><a href="/note/front-end/bytedance-note/webpack-knowledge-system/" rel="bookmark" title="青训营 |「构建Webpack知识体系」">青训营 |「构建Webpack知识体系」</a></li><li><a href="/note/front-end/bytedance-note/typescript-introduction/" rel="bookmark" title="青训营 |「TypeScript入门」笔记">青训营 |「TypeScript入门」笔记</a></li><li><a href="/note/front-end/bytedance-note/mini-game-development/" rel="bookmark" title="青训营 |「小游戏开发」笔记">青训营 |「小游戏开发」笔记</a></li><li><a href="/note/front-end/bytedance-note/mini-program-develop/" rel="bookmark" title="青训营 |「小程序技术全解」笔记">青训营 |「小程序技术全解」笔记</a></li><li><a href="/note/front-end/bytedance-note/web-multimedia-introduction/" rel="bookmark" title="青训营 |「Web多媒体入门」笔记">青训营 |「Web多媒体入门」笔记</a></li><li><a href="/note/front-end/bytedance-note/design-pattern/" rel="bookmark" title="青训营 |「前端设计模式应用」笔记">青训营 |「前端设计模式应用」笔记</a></li><li><a href="/back-end/go_learning_1/" rel="bookmark" title="Go语言初上手(一) 环境配置与基础语法 | 青训营">Go语言初上手(一) 环境配置与基础语法 | 青训营</a></li><li><a href="/back-end/go_learning_2/" rel="bookmark" title="Go语言初上手（二） 工程实践 | 青训营">Go语言初上手（二） 工程实践 | 青训营</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="cos" data-src="/img/avatar.jpg"><p class="name" itemprop="name">cos</p><div class="description" itemprop="description">愿岁并谢，与友长兮</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">142</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">21</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">96</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3l1c2l4aWFu" title="https:&#x2F;&#x2F;github.com&#x2F;yusixian"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9xaS1qaXUtZW4=" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;qi-jiu-en"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTM2MTAyOTgwNA==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;361029804"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmNvc2luZV95dUBxcS5jb20=" title="mailto:cosine_yu@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item"><a href="/musics/" rel="section"><i class="ic i-music"></i>歌单</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/note/front-end/bytedance-note/development-and-debugging/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/note/front-end/bytedance-note/animation-implement/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/contest/" title="分类于 竞赛">竞赛</a></div><span><a href="/PAT%E4%B9%99%E7%BA%A7%E5%88%B7%E9%A2%98%E6%84%9F%E6%83%B3%E5%8F%8A%E8%B8%A9%E5%9D%91%E6%80%BB%E7%BB%93" title="PAT乙级刷题感想及踩坑总结">PAT乙级刷题感想及踩坑总结<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/algorithm/" title="分类于 算法">算法</a></div><span><a href="/%E7%8A%B6%E5%8E%8Bdp%E2%80%94%E2%80%94%E6%A8%A1%E6%9D%BF&%E5%88%86%E6%9E%90&%E4%BE%8B%E9%A2%98%EF%BC%88%E5%AD%98%E7%94%A8%EF%BC%89" title="状压dp——模板&amp;分析&amp;例题（存用）">状压dp——模板&分析&例题（存用）<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/back-end/" title="分类于 后端">后端</a></div><span><a href="/%E9%AB%98%E7%BA%A7java%E5%B0%8F%E6%B5%8B2%E2%80%94%E2%80%94%E7%BA%BF%E7%A8%8B" title="高级java小测2——线程">高级java小测2——线程<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/cs-basics/" title="分类于 CS 基础">CS 基础</a></div><span><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%94%EF%BC%89%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8" title="计算机组成原理复习总结（五）中央处理器">计算机组成原理复习总结（五）中央处理器<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/data-structure/" title="分类于 数据结构">数据结构</a></div><span><a href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9C8%EF%BC%9E%20%E6%8E%92%E5%BA%8F" title="数据结构学习笔记＜8＞ 排序">数据结构学习笔记＜8＞ 排序<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/cs-basics/" title="分类于 CS 基础">CS 基础</a></div><span><a href="/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E5%88%9B%E5%BB%BA%E8%BF%9B%E7%A8%8B" title="操作系统编程实验——创建进程">操作系统编程实验——创建进程<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/bytedance-note/" title="分类于 青训营笔记">青训营笔记</a></div><span><a href="/note/front-end/bytedance-note/design-pattern" title="青训营 |「前端设计模式应用」笔记">青训营 |「前端设计模式应用」笔记<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/bytedance/" title="分类于 字节校园">字节校园</a></div><span><a href="/coding-train/leetcode/bytedance/bytedance-day19" title="冲刺春招-精选笔面试66题大通关day19">冲刺春招-精选笔面试66题大通关day19<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/bytedance-note/" title="分类于 青训营笔记">青训营笔记</a></div><span><a href="/note/front-end/bytedance-note/typescript-introduction" title="青训营 |「TypeScript入门」笔记">青训营 |「TypeScript入门」笔记<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/data-structure/" title="分类于 数据结构">数据结构</a></div><span><a href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9C3%EF%BC%9E%20%E9%98%9F%E5%88%97" title="数据结构学习笔记＜3＞ 队列">数据结构学习笔记＜3＞ 队列<i class="ic i-link-alt"></i></a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">cos @ cosine</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">640k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">9:41</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"note/front-end/bytedance-note/responsive-system-and-react/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->